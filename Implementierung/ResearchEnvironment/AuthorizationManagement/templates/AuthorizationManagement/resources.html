{% extends "AuthorizationManagement/profile.html" %}

{% block styles %}
	{% load static %}
	<link rel="stylesheet" href="{% static 'AuthorizationManagement/css/info.css' %}" />
	<link rel="stylesheet" type="text/css" href="{% static 'AuthorizationManagement/css/modal_dialog_req.css' %}" />
	<link rel="stylesheet" type="text/css" href="{% static 'AuthorizationManagement/css/profile.css' %}" />
	<link rel="stylesheet" type="text/css" href="{% static 'AuthorizationManagement/css/my-resources.css' %}" />
{% endblock %}

{% block requests_or_resources %}

	<div class="mini-nav">
			<a href="/profile/" class="noncurrent">Requests</a></li>
				
			<a href="/profile/my-resources" class="current">My Resources</a></li>
	</div>	
	
<div class="resources-container">	
	
	<a href="/profile/my-resources/add-new-resource" class="create-resource"><strong>+</strong></a>
	
	{% for resource in resource_list %}
		<a href="#{{resource.pk}}" class="res-name"> {{resource.name}} </a>
		<div id="{{resource.pk}}" class="modalDialog">
			<div>
				<a href="" title="Close" class="close"> x </a>
				<h2>Information about : {{resource.name}}</h2>
					<p><strong>Name:</strong> {{resource.name}}</p>
					<p><strong>Type:</strong> {{resource.type}}</p>
					<p><strong>CreationDate:</strong> {{resource.creationDate}}</p>
					<p><strong>Description:</strong> {{resource.description}}</p>
					<p>
							<a href="../../../resources/{{resource.pk}}"download>Access</a>
					</p>
			</div>
		</div>

		<a href="../../resources/{{resource.id}}" class="res-access-btn"download>Access</a>

		<a href="/profile/my-resources/{{resource.id}}-edit-users-permissions" class="edit-perm"> Edit Permissions</a>

		{% if resource in deletion_requested %}
				      <a href="#cancel-deletion-request-{{resource.pk}}" class="cancel-del-req"> Cancel Deletion Request </a>

						<div id="cancel-deletion-request-{{resource.pk}}" class="modalDialog">
							<div>
							<a href="" title="Close" class="close"> x </a>
							<form action="/cancel-deletion-request/{{resource.id}}" method="post">
							{% csrf_token %}
								<div>
								<p> Are you sure you want to CANCEL the deletion request for {{resource.name}}? </p>
								    <input type="submit"
										   value="yes, cancel request">
									<button>
									<a href="" title="Close" class="test"> Close </a>
									</button>
								</div>
							  </form>
							</div>
						</div>
						<br>
						

		{% else %}
			{% if is_admin %}	
			<a href="#delete-resource-{{resource.pk}}" class="delete-btn"> Delete </a>
			{% else %}
			<a href="#send-deletion-request-{{resource.pk}}" class="delete-btn"> Delete </a>
			{% endif %}
		<div id="send-deletion-request-{{resource.pk}}" class="modalDialog">
				<div>
				<a href="" title="Close" class="close"> x </a>
					<form action="/send-deletion-request/{{resource.id}}" method="post">
						{% csrf_token %}
						    <div class="row">
								<label for="desc">Description: </label><br><br>
                                      <textarea id="descr" name = "descr" placeholder="optional" maxlength="250" cols = "50" rows = "5"></textarea>
							</div>

							<div class = "row">
								<p> Are you sure you want to request the deletion for {{resource.name}}?</p>
								<input id="send" type="submit" value="yes, send request">
							<button>
								<a href="" title="Close" class="test"> Close </a>
							</button>
							</div>
					</form>
				</div>
		</div>
		<div id="delete-resource-{{resource.pk}}" class="modalDialog">
				<div>
				<a href="" title="Close" class="close"> x </a>
					<form action="/delete-resource/{{resource.id}}" method="post">
						{% csrf_token %}
						    <div class="row">
								<label for="desc">Description: </label><br><br>
                                      <textarea id="descr" name = "descr" placeholder="optional" maxlength="250" cols = "50" rows = "5"></textarea>
							</div>

							<div class = "row">
								<p> Are you sure you want to to delete the resource {{resource.name}}?</p>
								<input id="send" type="submit" value="yes">
							<button>
								<a href="" title="Close" class="test"> Close </a>
							</button>
							</div>
					</form>
				</div>
		</div>
	{% endif %}
  {% endfor %}
  
</div>

{% endblock %}