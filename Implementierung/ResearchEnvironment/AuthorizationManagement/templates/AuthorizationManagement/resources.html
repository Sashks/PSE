{% extends "AuthorizationManagement/profile.html" %}

{% block styles %}
	{% load static %}
	<link rel="stylesheet" href="{% static 'AuthorizationManagement/css/info.css' %}" />
	<link rel="stylesheet" type="text/css" href="{% static 'AuthorizationManagement/css/modal_dialog_req.css' %}" />
{% endblock %}

{% block requests_or_resources %}
<ul>
	<h3>My resources</h3>
	{% for resource in resource_list %}
	<p> <button  style="margin-left:10px; float:left;">
		<a href="#{{resource.pk}}"> {{resource.name}} </a>
	</button>

		<div id="{{resource.pk}}" class="modalDialog">
			<div>
				<a href="" title="Close" class="close"> x </a>
				<h2>Information about : {{resource.name}}</h2>
					<p><strong>Name:</strong> {{resource.name}}</p>
					<p><strong>Type:</strong> {{resource.type}}</p>
					<p><strong>CreationDate:</strong> {{resource.creationDate}}</p>
					<p><strong>Description:</strong> {{resource.description}}</p>
					<p>
						<button style="margin-left:10px;">
							<a href="../../../resources/{{resource.pk}}"download>access</a>
						</button>
					</p>
			</div>
		</div>

	<button type="button" style="margin-left:10px; float: left;">
		<a href="../../resources/{{resource.id}}"download>access</a>
	</button>

	<button style="margin-left:10px; float: left;" type="button" onclick="window.location.href='/profile/my-resources/{{resource.id}}-edit-users-permissions'">
				edit permissions
	</button>

	{% if resource in deletion_requested %}
	<button style="margin-left:10px; background-color:tomato;">
				      <a href="#cancel-deletion-request-{{resource.pk}}" > cancel deletion request </a>
					  </button>

						<div id="cancel-deletion-request-{{resource.pk}}" class="modalDialog">
							<div>
							<a href="" title="Close" class="close"> x </a>
							<form action="/cancel-deletion-request/{{resource.id}}" method="post">
							{% csrf_token %}
								<div>
								<p> Are you sure you want to CANCEL the deletion request for {{resource.name}}? </p>
								    <input type="submit"
										   value="yes, cancel request">
									<button>
									<a href="" title="Close" class="test"> Close </a>
									</button>
								</div>
							  </form>
							</div>
						</div>
						<br>
						

	{% else %}
		{% if is_admin %}
		
		<button style="margin-left:10px;">
			<a href="#delete-resource-{{resource.pk}}" > delete </a>
		</button>
		{% else %}
		<button style="margin-left:10px;">
			<a href="#send-deletion-request-{{resource.pk}}" > delete </a>
		</button>
		{% endif %}
		<div id="send-deletion-request-{{resource.pk}}" class="modalDialog">
			<div>
				<a href="" title="Close" class="close"> x </a>
					<form action="/send-deletion-request/{{resource.id}}" method="post">
						{% csrf_token %}
						    <div class="row">
								<label for="desc">Description: </label><br><br>
                                      <textarea id="descr" name = "descr" placeholder="optional" maxlength="250" cols = "50" rows = "5"></textarea>
							</div>

							<div class = "row">
								<p> Are you sure you want to request the deletion for {{resource.name}}?</p>
								<input id="send" type="submit" value="yes, send request">
							<button>
								<a href="" title="Close" class="test"> Close </a>
							</button>
							</div>
					</form>
			</div>
		</div>
		<div id="delete-resource-{{resource.pk}}" class="modalDialog">
			<div>
				<a href="" title="Close" class="close"> x </a>
					<form action="/delete-resource/{{resource.id}}" method="post">
						{% csrf_token %}
						    <div class="row">
								<label for="desc">Description: </label><br><br>
                                      <textarea id="descr" name = "descr" placeholder="optional" maxlength="250" cols = "50" rows = "5"></textarea>
							</div>

							<div class = "row">
								<p> Are you sure you want to to delete the resource {{resource.name}}?</p>
								<input id="send" type="submit" value="yes">
							<button>
								<a href="" title="Close" class="test"> Close </a>
							</button>
							</div>
					</form>
			</div>
		</div>
	<br>
	{% endif %}
	</p>
    {% endfor %}
</ul>
<li><a href="/profile/my-resources/add-new-resource">Create a Resource</a></li>
{% endblock %}